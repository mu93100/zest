<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nouvelle recette</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body class="recette">
    <div class="container">
        <div class="header">
            <h1>nouvelle recette</h1>
            <p>Par x du groupe z, ville</p>
        </div>

        <div class="form_container">
            <form id="recetteForm" action="/ajouter_recette" method="POST" enctype="multipart/form_data">
<!-- 
avec : <input type="file"> : permet √† user de t√©l√©charger une image depuis son ordi
enctype="multipart/form_data" ::: obligatoire pour envoyer des fichiers via le formulaire
accept="image/*" ::: limite le choix aux fichiers image (jpg, png, etc.)

En PHP : utiliser $_FILES['photo']

<input type="file" id="photo" name="photo" accept="image/*" onchange="previewImage(event)" required>
<img id="preview" style="max-width: 300px; margin-top: 10px;" />
<script>
function previewImage(event) {
    const reader = new FileReader();
    reader.onload = function(){
        const output = document.getElementById('preview');
        output.src = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
}
</script>-->

                
                <!-- Informations adherent-->
                <!-- <div class="form_section">                    
                    <div class="form_row">
                        <div class="form_group">
                            <label for="prenom">Pr√©nom <span class="required">*</span></label>
                            <input type="text" id="prenom" name="prenom" required>
                        </div>
                        <div class="form_group">
                            <label for="nom">Nom <span class="required">*</span></label>
                            <input type="text" id="nom" name="nom" required>
                        </div>
                    </div>

                    <div class="form_row">
                        <div class="form_group">
                            <label for="email">Email <span class="required">*</span></label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form_group">
                            <label for="nom">Nom de mon groupe <span class="required">*</span></label>
                            <input type="text" id="groupe" name="groupe" required>
                        </div>
                    </div>
                </div> -->
                <div class="form_section">                    
                    <div class="form_row">    
                        <div class="form_group">
                            <label for="recetteTitre">Titre de la recette</label>
                            <input type="text" id="recetteTitre" name="recetteTitre" required>
                        </div>
                        <div class="form_group">
                            <label for="recettePhoto">Photo de la recette</label>
                            <input type="file" id="recettePhoto" name="recettePhoto" accept="image/*" required>
                        </div>
                    </div>
                    <div class="form_group">    
                        <label for="recetteDescription">Description de la recette</label>
                        <textarea id="recetteDescription" name="recetteDescription" placeholder="[ Le texte sera publi√© √† l'identique ] soit dr√¥le s√©rieux.se cr√©atif.ve v√©n√®re militant.e .. on adorera tous les tons except√© les contenus haineux et discriminatoires" required></textarea>
                    </div>
                </div>

                <!-- Bouton de soumission -->
                <div class="submit_container">
                    <button type="submit" class="submit_btn">E N V O Y E R</button>
                </div>
            </form>
        </div>
    </div>

</body>
</html>

<!-- 
Maintenant, pour que √ßa fonctionne avec Symfony et ta table recettes, voici les √©tapes √† suivre c√¥t√© backend :

üß± 1. Cr√©er l'entit√© Recette
php
// src/Entity/Recette.php
#[ORM\Entity]
class Recette
{
    #[ORM\Id]
    #[ORM\GeneratedValue]
    #[ORM\Column]
    private ?int $id = null;

    #[ORM\Column(length: 255)]
    private ?string $titre = null;

    #[ORM\Column(type: 'text')]
    private ?string $description = null;

    #[ORM\Column(length: 255, nullable: true)]
    private ?string $photo = null;

    // Getters & setters...
}
üßæ 2. Cr√©er un formulaire Symfony
php
// src/Form/RecetteType.php
class RecetteType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('titre')
            ->add('description')
            ->add('photo', FileType::class, [
                'label' => 'Photo de la recette',
                'mapped' => false,
                'required' => true,
                'constraints' => [
                    new File([
                        'maxSize' => '2M',
                        'mimeTypes' => ['image/jpeg', 'image/png'],
                        'mimeTypesMessage' => 'Format d‚Äôimage invalide',
                    ])
                ],
            ]);
    }
}
üßë‚Äçüç≥ 3. Cr√©er le contr√¥leur pour g√©rer /ajouter_recette
php
// src/Controller/RecetteController.php
#[Route('/ajouter_recette', name: 'ajouter_recette')]
public function ajouter(Request $request, EntityManagerInterface $em): Response
{
    $recette = new Recette();
    $form = $this->createForm(RecetteType::class, $recette);
    $form_>handleRequest($request);

    if ($form_>isSubmitted() && $form_>isValid()) {
        $photoFile = $form_>get('photo')->getData();

        if ($photoFile) {
            $newFilename = uniqid().'.'.$photoFile->guessExtension();
            $photoFile->move(
                $this->getParameter('photos_directory'),
                $newFilename
            );
            $recette->setPhoto($newFilename);
        }

        $em->persist($recette);
        $em->flush();

        return $this->redirectToRoute('recette_success');
    }

    return $this->render('recette/ajouter.html.twig', [
        'form' => $form_>createView(),
    ]);
}
üìÅ 4. Configurer le dossier d‚Äôupload
Dans config/services.yaml :

yaml
parameters:
    photos_directory: '%kernel.project_dir%/public/uploads/photos'
Et cr√©e le dossier public/uploads/photos dans ton projet.

üß™ 5. Adapter ton template Twig
Remplace ton formulaire HTML par :

twig
{{ form_start(form, {'attr': {'enctype': 'multipart/form_data'}}) }}
    {{ form_widget(form) }}
    <button type="submit">E N V O Y E R</button>
{{ form_end(form) }}
    -->